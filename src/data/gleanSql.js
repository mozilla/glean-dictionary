export const getGleanQuery = (columnName, table) => `
-- Auto-generated by the Glean Dictionary.
-- https://docs.telemetry.mozilla.org/cookbooks/accessing_glean_data.html#accessing-glean-data-in-bigquery
  
SELECT
  ${columnName}
FROM
  ${table} AS m
WHERE
  -- Pick yesterday's data from stable/historical tables.
  -- https://docs.telemetry.mozilla.org/cookbooks/bigquery/querying.html#table-layout-and-naming
  DATE(submission_timestamp) = DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY)
-- IMPORTANT: Remove the limit clause when the query is ready.
LIMIT 10`;

export const getGleanEventQuery = (table, additionalInfo) => `
  -- Auto-generated by the Glean Dictionary.
  -- https://docs.telemetry.mozilla.org/cookbooks/accessing_glean_data.html#event-metrics

WITH events AS (
  SELECT
    submission_timestamp,
    event,
    event_extra
  FROM ${table} as e
  WHERE
    -- Pick data for the last two days from stable/historical tables.
    -- https://docs.telemetry.mozilla.org/cookbooks/bigquery/querying.html#table-layout-and-naming
    date(submission_timestamp) >= DATE_SUB(CURRENT_DATE(), INTERVAL 2 DAY)
    AND event = '${additionalInfo.category}.${additionalInfo.name}'
    -- Event extras can be queried as a JSON object. Here is an example
    -- to only fetch events that carry an extra property named 'the_name'
    -- with a value of 'the_value'.
    -- AND JSON_VALUE(event_extra.the_name) = 'the_value'
)
SELECT * FROM events
-- IMPORTANT: Remove the limit clause when the query is ready.
LIMIT 10`;

export const getGleanPingQuery = (table) => `
  -- Autogenerated by the Glean Dictionary.
  -- https://mozilla.github.io/glean/book/user/pings/index.html#payload-structure
  SELECT
    client_info.*,
    ping_info.*,
    metrics.*
  FROM
    ${table} AS m
  WHERE
    -- Pick yesterday's data from stable/historical tables.
    -- https://docs.telemetry.mozilla.org/cookbooks/bigquery/querying.html#table-layout-and-naming
    DATE(submission_timestamp) = DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY)
  -- IMPORTANT: Remove the limit clause when the query is ready.
  LIMIT 10`;
